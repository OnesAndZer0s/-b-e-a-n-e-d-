var percent=.25*Math.random()+.7,instant=!1;currentTrainer.setupHandlers=function(){Ext.get("training_sessions").on("click",function(t,e){var i=t.getTarget("form.button-to",3,!0);i&&(i.addClass("clicked"),t.preventDefault(),console.log(i),this.advance(i))},this);var t=this;window.onfocus=function(){Ext.select("trainer-loading").first()&&t.post(t.activeTarget)},Ext.getBody().on("click",function(t,e){Ext.get(e).child("p").toggle(!0)},this,{delegate:"#training-clock-stats"})},currentTrainer.advance=function(t,e){if(this.activeTarget=t,e=void 0!==e&&e,ok=this.beforePageChange(),!ok)return!1;var i=this.activeTarget.child("[name=time-on-page]");if(i){var n=this.timeOnPage();i.dom.value=Ext.util.JSON.encode({time:n})}this.activeTarget.insertHtml("beforeEnd","<input id='annotate_it' name='it' type='hidden' value="+(20*Math.random()).toFixed(2)+"></input>"),this.activeTarget.insertHtml("beforeEnd","<input id='more_ts' name='more_ts' type='hidden' value="+this.tsEncryptSeed(e)+"></input>"),Ext.select("#section1-wrapper").ghost("l",{callback:function(){document.activeElement.blur(),this.post(this.activeTarget)},duration:.75,scope:this})},MB.initWord=function(t){MB.pronounceWord(),MB.activateToolTips(),MB.Sticky.addSaveHandler(Ext.select(".note").first()),MB.activateModalCalloutBox(),autoTimer.start(instant?2:(3*Math.random()+6).toFixed(3))},MB.Review.initQuestion=function(){return autoTimer.start(instant?2:((Ext.get("timer-container").dom.getAttribute("data-timeout")||25)/4+3*Math.random()+2).toFixed(3)),MB.Review.activateQuestion()},MB.wordSpell=function(){if(Ext.get("wordspell")){MB.pronounceWord(),autoTimer.start(instant?2:(3*Math.random()+6).toFixed(3));var t=new MB.ClozeQuestion({timer:null,fullSpell:!0,callback:{correct:function(){t.updateResult(!0)},incorrect:function(){t.updateResult(!1)},spell:function(e,i,n){t.warnSpelling(e,i,n)}},showAnswer:!0});return t}},MB.AutoTimer=Ext.extend(Ext.util.Observable,{constructor:function(t){this.config=t||{},Ext.apply(this,t,{nsecs:10}),MB.Timer.superclass.constructor.call(this,t),this.addEvents({finish:!0}),this.pbar=new Ext.ProgressBar({renderTo:this.config.renderTo,height:this.config.height||20,width:"100%",cls:this.config.cls||"timer"})},start:function(t){this.startTimer=new Date,this.nsecs=t||this.nsecs,this.pbar.wait({text:`${this.nsecs} seconds`,duration:1e3*this.nsecs,interval:100,scope:this,increment:1e3*this.nsecs/100,fn:function(){this.fireEvent("finish")}},this)},max:function(){this.pbar.updateProgress(1)},stop:function(){this.pbar.reset(),this.pbar.text=""},elapsedSinceStart:function(){return(new Date).getElapsed(this.startTimer)/1e3}});var autoTimer=new MB.AutoTimer({renderTo:"header"});autoTimer.start(instant?2:(3*Math.random()+2).toFixed(3)),autoTimer.on("finish",function(){autoTimer.stop(),Ext.fly("word-page")?currentTrainer.advance(Ext.get(document.querySelector("#trainer-nav > form:nth-child(2)"))):currentTrainer.currentQuiz.fireEvent(Math.random()<=percent?"correct":"incorrect")},this);